# ===============================================================================
# REGISTRY — Hub Identity Declaration
# ===============================================================================
# Authority: imo-creator (Inherited)
# Status: REQUIRED — Every hub MUST have a REGISTRY.yaml
# ===============================================================================

version: "1.0.0"
last_updated: "2026-02-05"

# ===============================================================================
# HUB IDENTITY (CC-02)
# ===============================================================================

hub:
  hub_id: "client-subhive"
  hub_name: "Client Intake & Vendor Export System"
  description: "Manages client data intake, transforms to canonical schema, and exports to vendor-specific formats"
  owner: "Barton Ops System"
  sovereign_reference: "imo-creator"

# ===============================================================================
# CONFORMANCE
# ===============================================================================

conformance:
  parent: "imo-creator"
  doctrine_version: "1.5.0"
  ctb_version: "1.1.0"
  domain_spec: "doctrine/REPO_DOMAIN_SPEC.md"

# ===============================================================================
# CTB PLACEMENT
# ===============================================================================

ctb:
  branches_used:
    sys: true
    data: true
    app: true
    ai: true
    ui: true

# ===============================================================================
# SUB-HUBS (CC-03)
# ===============================================================================

subhubs:
  - subhub_id: "intake"
    name: "Client Intake"
    description: "API-based intake for company and employee data capture"
    path: "src/ui/"

  - subhub_id: "canonical"
    name: "Canonical Vault"
    description: "Neon PostgreSQL canonical data storage (clnt2 schema)"
    path: "src/data/"

  - subhub_id: "export"
    name: "Vendor Export"
    description: "Vendor-specific data export generation"
    path: "src/sys/"

# ===============================================================================
# SPOKES (CC-03 Interfaces)
# ===============================================================================

spokes:
  ingress:
    - spoke_id: "api-intake"
      name: "API Intake Endpoint"
      contract: "Zod schema validation"

  egress:
    - spoke_id: "vendor-export"
      name: "Vendor Export Interface"
      contract: "vendor_output_blueprint schema"

    - spoke_id: "compliance-report"
      name: "Compliance Reporting"
      contract: "compliance_vault schema"

# ===============================================================================
# SECRETS MANAGEMENT
# ===============================================================================

secrets:
  provider: "doppler"
  project: "client-subhive"
  enforcement: "MANDATORY"
  policy: |
    All secrets MUST be sourced from Doppler.
    No .env files, no hardcoded secrets, no local secret files permitted.

# ===============================================================================
# DATABASE
# ===============================================================================

database:
  provider: "neon"
  schema: "clnt2"
  tables: 12
  erd_metrics: "erd/ERD_METRICS.yaml"

# ===============================================================================
# DOCUMENT CONTROL
# ===============================================================================

document_control:
  created: "2026-01-30"
  last_modified: "2026-02-05"
  status: "ACTIVE"
