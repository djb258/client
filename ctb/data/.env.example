# CTB/DATA Environment Configuration
# Copy this file to .env and update with your actual values

# ============================================================================
# DATABASE - PostgreSQL (Neon)
# ============================================================================
DATABASE_URL=postgresql://user:password@host.neon.tech:5432/client_subhive
DATABASE_NAME=client_subhive
DATABASE_USER=postgres
DATABASE_PASSWORD=your-secure-password
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_SSL=true
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ============================================================================
# TEST DATABASE
# ============================================================================
TEST_DATABASE_URL=postgresql://localhost/client_subhive_test
TEST_DATABASE_NAME=client_subhive_test

# ============================================================================
# FIREBASE / FIRESTORE
# ============================================================================
FIREBASE_PROJECT_ID=client-subhive
FIREBASE_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----
FIREBASE_CLIENT_EMAIL=service@client-subhive.iam.gserviceaccount.com
FIREBASE_DATABASE_URL=https://client-subhive-default-rtdb.firebaseio.com

# Or use service account file path
FIREBASE_SERVICE_ACCOUNT_PATH=/path/to/service-account.json

# ============================================================================
# MIGRATIONS
# ============================================================================
MIGRATIONS_DIR=ctb/data/migrations
MIGRATION_TABLE=schema_migrations
AUTO_MIGRATE=false

# ============================================================================
# BACKUP & RECOVERY
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=s3://backups/client-subhive
BACKUP_S3_BUCKET=client-subhive-backups
BACKUP_S3_REGION=us-east-1

# AWS Credentials for backups
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-east-1

# ============================================================================
# DATA ENCRYPTION
# ============================================================================
DATA_ENCRYPTION_ENABLED=true
DATA_ENCRYPTION_KEY=your-32-char-encryption-key-here
DATA_ENCRYPTION_ALGORITHM=aes-256-gcm

# ============================================================================
# QUERY OPTIMIZATION
# ============================================================================
QUERY_TIMEOUT=30000
QUERY_CACHE_ENABLED=true
QUERY_CACHE_TTL=300
SLOW_QUERY_LOG_THRESHOLD=1000

# ============================================================================
# CONNECTION POOLING
# ============================================================================
CONNECTION_POOL_ENABLED=true
CONNECTION_POOL_SIZE=10
CONNECTION_IDLE_TIMEOUT=30000
CONNECTION_ACQUIRE_TIMEOUT=60000

# ============================================================================
# REGISTRY
# ============================================================================
REGISTRY_PATH=ctb/data/db/registry
COLUMN_REGISTRY_FILE=clnt_column_registry.yml

# ============================================================================
# DATA VALIDATION
# ============================================================================
VALIDATE_ON_INSERT=true
VALIDATE_ON_UPDATE=true
STRICT_SCHEMA_VALIDATION=false

# ============================================================================
# REPLICATION
# ============================================================================
ENABLE_REPLICATION=false
REPLICATION_DELAY_THRESHOLD=5000
REPLICA_DATABASE_URL=postgresql://user:pass@replica-host:5432/db

# ============================================================================
# MONITORING
# ============================================================================
DB_MONITORING_ENABLED=true
DB_METRICS_INTERVAL=60000
DB_SLOW_QUERY_ALERTS=true

# ============================================================================
# DEVELOPMENT
# ============================================================================
DB_LOGGING=true
DB_LOG_QUERIES=false
DB_DEBUG_MODE=false
SEED_TEST_DATA=true
